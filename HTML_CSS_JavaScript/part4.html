<!doctype html;>
<html>
<head>
	<title>Part 4</title>
	<style type="text/css">
		img {	position:absolute;}
		div {	position:absolute;width:500px;height:500px}
		#rightside {left:500px;border-left: 1px solid black}
	</style>

	<script type="text/javascript">
		var image_path = 'http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png';
		var numberOfFaces = 5;
		var theLeftSide,theRightSide; 

		function generateFaces()
		{
			theLeftSide = document.getElementById('leftside');
			theRightSide = document.getElementById('rightside');
			for(var i=0;i < numberOfFaces; i++)
			{
				var x=Math.floor(Math.random()*400);
				var y=Math.floor(Math.random()*400);
				var image = document.createElement('img');
				image.src=image_path;
				image.style.top=x;
				image.style.left=y;
				theLeftSide.appendChild(image);
			}

			var left_side_images = theLeftSide.cloneNode(true);
			left_side_images.removeChild(left_side_images.lastChild);
			theRightSide.appendChild(left_side_images);
			registerEvents();
		}

		function registerEvents()
		{
			var theBody = document.getElementsByTagName('body')[0];
			theBody.onclick = function gameOver()
										{
											alert('Game Over!');
											theBody.onclick=null;
											theLeftSide.lastChild.onclick=null;
										}
			theLeftSide.lastChild.onclick = function nextLevel(event)
										{
											event.stopPropagation();
											numberOfFaces+=5;
											while(theLeftSide.lastChild)
											{
												theLeftSide.removeChild(theLeftSide.lastChild)
											}
											while(theRightSide.lastChild)
											{
												theRightSide.removeChild(theRightSide.lastChild)
											}
											generateFaces();
										}
		}
	</script>
</head>
<body onload='generateFaces()'>
	<h1>Matching Game</h1>
	<p>Click on the extra smiling face on the left.</p>
	<div id='leftside'></div>
	<div id='rightside'></div>
</body>
</html>